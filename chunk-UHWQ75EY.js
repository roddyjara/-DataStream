import{a as O,c as P,d as F,e as N,f as x,g as D,h as I,k as T,l as w,m as A,n as k,p as z}from"./chunk-WK2RLTW3.js";import{a as E}from"./chunk-CTWZ4Y67.js";import{b,d as S}from"./chunk-VC6E4ROJ.js";import"./chunk-4LKPXAJC.js";import{a as R}from"./chunk-TEFFRFYT.js";import{Ca as _,Pa as y,Qa as h,Ra as C,Sa as m,Ta as e,Ua as n,a as c,b as u,ba as f,bb as d,jb as r,kb as M,lb as v,qa as l,ya as g}from"./chunk-7AMOEM73.js";function V(s,a){if(s&1&&(e(0,"option",12),r(1),n()),s&2){let o=a.$implicit;m("value",o),l(),M(o)}}var q=class s{constructor(a,o,t,p){this.employeeService=a;this.authService=o;this.router=t;this.route=p}isEdit=f(!1);employeeId=f(null);form=f({firstName:"",lastName:"",email:"",phone:"",position:"",department:"",hireDate:new Date().toISOString().split("T")[0],salary:0,status:"active"});departments=["Tecnolog\xEDa","Recursos Humanos","Ventas","Marketing","Finanzas","Operaciones","An\xE1lisis","Gesti\xF3n"];ngOnInit(){let a=this.route.snapshot.paramMap.get("id");if(a&&this.route.snapshot.url.some(o=>o.path==="editar")){this.isEdit.set(!0),this.employeeId.set(a);let o=this.employeeService.getById(a);o&&this.form.set({firstName:o.firstName,lastName:o.lastName,email:o.email,phone:o.phone,position:o.position,department:o.department,hireDate:new Date(o.hireDate).toISOString().split("T")[0],salary:o.salary,status:o.status})}}updateField(a,o){this.form.update(t=>u(c({},t),{[a]:o}))}onSubmit(){let a=this.form();this.isEdit()?(this.employeeService.update(this.employeeId(),u(c({},a),{hireDate:new Date(a.hireDate)})),this.employeeService.addHistoryEntry(this.employeeId(),{date:new Date,action:"Actualizaci\xF3n",description:"Datos del empleado actualizados"})):(this.employeeService.create(u(c({},a),{hireDate:new Date(a.hireDate)})),this.authService.addUser({id:String(Date.now()),email:a.email,password:"password123",role:"employee",employeeId:"EMP"+String(this.employeeService.employees().length).padStart(3,"0")})),this.router.navigate(["/empleados"])}static \u0275fac=function(o){return new(o||s)(g(R),g(E),g(S),g(b))};static \u0275cmp=_({type:s,selectors:[["app-employee-form"]],decls:55,vars:11,consts:[[1,"employee-form-page"],[1,"page-header"],[1,"form-card",3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],["type","text","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","tel","name","phone",3,"ngModelChange","ngModel"],["type","text","name","position","required","",3,"ngModelChange","ngModel"],["name","department","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","date","name","hireDate","required","",3,"ngModelChange","ngModel"],["type","number","name","salary",3,"ngModelChange","ngModel"],["name","status",3,"ngModelChange","ngModel"],["value","active"],["value","inactive"],[1,"form-actions"],["type","button","routerLink","/empleados",1,"btn-secondary"],["type","submit",1,"btn-primary"]],template:function(o,t){o&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),r(3),n()(),e(4,"form",2),d("ngSubmit",function(){return t.onSubmit()}),e(5,"div",3)(6,"div",4)(7,"label"),r(8,"Nombre"),n(),e(9,"input",5),d("ngModelChange",function(i){return t.updateField("firstName",i)}),n()(),e(10,"div",4)(11,"label"),r(12,"Apellido"),n(),e(13,"input",6),d("ngModelChange",function(i){return t.updateField("lastName",i)}),n()(),e(14,"div",4)(15,"label"),r(16,"Email"),n(),e(17,"input",7),d("ngModelChange",function(i){return t.updateField("email",i)}),n()(),e(18,"div",4)(19,"label"),r(20,"Tel\xE9fono"),n(),e(21,"input",8),d("ngModelChange",function(i){return t.updateField("phone",i)}),n()(),e(22,"div",4)(23,"label"),r(24,"Posici\xF3n"),n(),e(25,"input",9),d("ngModelChange",function(i){return t.updateField("position",i)}),n()(),e(26,"div",4)(27,"label"),r(28,"Departamento"),n(),e(29,"select",10),d("ngModelChange",function(i){return t.updateField("department",i)}),e(30,"option",11),r(31,"Seleccionar..."),n(),h(32,V,2,2,"option",12,y),n()(),e(34,"div",4)(35,"label"),r(36,"Fecha de Contrataci\xF3n"),n(),e(37,"input",13),d("ngModelChange",function(i){return t.updateField("hireDate",i)}),n()(),e(38,"div",4)(39,"label"),r(40,"Salario"),n(),e(41,"input",14),d("ngModelChange",function(i){return t.updateField("salary",i)}),n()(),e(42,"div",4)(43,"label"),r(44,"Estado"),n(),e(45,"select",15),d("ngModelChange",function(i){return t.updateField("status",i)}),e(46,"option",16),r(47,"Activo"),n(),e(48,"option",17),r(49,"Inactivo"),n()()()(),e(50,"div",18)(51,"button",19),r(52,"Cancelar"),n(),e(53,"button",20),r(54),n()()()()),o&2&&(l(3),M(t.isEdit()?"Editar Empleado":"Nuevo Empleado"),l(6),m("ngModel",t.form().firstName),l(4),m("ngModel",t.form().lastName),l(4),m("ngModel",t.form().email),l(4),m("ngModel",t.form().phone),l(4),m("ngModel",t.form().position),l(4),m("ngModel",t.form().department),l(3),C(t.departments),l(5),m("ngModel",t.form().hireDate),l(4),m("ngModel",t.form().salary),l(4),m("ngModel",t.form().status),l(9),v("",t.isEdit()?"Actualizar":"Crear"," Empleado"))},dependencies:[z,D,w,A,O,I,T,P,F,k,x,N],styles:[".employee-form-page[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:1.75rem;margin:0}.form-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2ecc,#16213ecc);border:1px solid rgba(255,255,255,.05);border-radius:16px;padding:2rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#ffffffb3;margin-bottom:.5rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;background:#ffffff14;border:1px solid rgba(255,255,255,.15);border-radius:10px;color:#fff;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#e94560;box-shadow:0 0 20px #e9456033}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#1a1a2e;color:#fff}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e94560,#ff6b6b);color:#fff;padding:.875rem 2rem;border:none;border-radius:10px;cursor:pointer;font-weight:500;transition:all .2s ease}.form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 20px #e9456066}.form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#ffffff1a;color:#ffffffb3;padding:.875rem 2rem;border:1px solid rgba(255,255,255,.2);border-radius:10px;cursor:pointer;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center}.form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff26;color:#fff}"]})};export{q as EmployeeFormComponent};
