import{a as V}from"./chunk-HJJX7XXA.js";import{a as I}from"./chunk-CTWZ4Y67.js";import{d as w}from"./chunk-VC6E4ROJ.js";import{f as P,g as O,h as k,j as S}from"./chunk-4LKPXAJC.js";import{Ca as x,Ha as u,N as b,S as p,Sa as d,T as f,Ta as i,Ua as n,Za as g,bb as C,db as s,ib as v,jb as r,kb as _,lb as h,qa as c,qb as M,sb as y,vb as E}from"./chunk-7AMOEM73.js";function T(l,e){if(l&1){let t=g();i(0,"button",7),C("click",function(){p(t);let a=s();return f(a.createClient())}),r(1," Nuevo Cliente "),n()}}function N(l,e){if(l&1){let t=g();i(0,"button",11),C("click",function(){p(t);let a=s().$implicit,m=s();return f(m.editClient(a))}),r(1,"Editar"),n()}}function F(l,e){if(l&1){let t=g();i(0,"button",14),C("click",function(){p(t);let a=s().$implicit,m=s();return f(m.deleteClient(a))}),r(1,"Eliminar"),n()}}function U(l,e){if(l&1){let t=g();i(0,"tr",8)(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td"),r(6),n(),i(7,"td"),r(8),M(9,"date"),n(),i(10,"td")(11,"span",9),r(12),n()(),i(13,"td",10)(14,"button",11),C("click",function(){let a=p(t).$implicit,m=s();return f(m.viewClient(a))}),r(15,"Ver"),n(),u(16,N,2,0,"button",12)(17,F,2,0,"button",13),n()()}if(l&2){let t,o=e.$implicit,a=s();c(2),_(o.name),c(2),_(o.city),c(2),_(o.email),c(2),_(y(9,9,o.serviceDate,"dd/MM/yyyy")),c(3),v("status-"+o.status),c(),h(" ",a.getStatusText(o.status)," "),c(4),d("ngIf",a.canEditClient(o)),c(),d("ngIf",((t=a.currentUser())==null?null:t.role)==="admin")}}function D(l,e){l&1&&(i(0,"div",15)(1,"p"),r(2,"No hay clientes para mostrar."),n()())}var L=class l{clientService=b(V);authService=b(I);router=b(w);clients=this.clientService.getClients();currentUser=this.authService.currentUser;filteredClients=E(()=>{let e=this.currentUser();return e?.role==="admin"?this.clients():e?.role==="employee"?this.clients().filter(t=>t.assignedEmployeeId===e.employeeId):[]});canCreateClient(){return this.currentUser()?.role==="admin"||this.currentUser()?.role==="employee"}canEditClient(e){let t=this.currentUser();return t?.role==="admin"||t?.role==="employee"&&e.assignedEmployeeId===t.employeeId}viewClient(e){this.router.navigate(["/clientes",e.id])}editClient(e){this.router.navigate(["/clientes",e.id,"editar"])}createClient(){this.router.navigate(["/clientes/nuevo"])}deleteClient(e){confirm(`\xBFEliminar cliente ${e.name}?`)&&this.clientService.deleteClient(e.id)}getStatusText(e){return{pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",cancelled:"Cancelado"}[e]||e}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=x({type:l,selectors:[["app-client-list"]],decls:24,vars:3,consts:[[1,"client-list"],[1,"header"],["class","btn-primary",3,"click",4,"ngIf"],[1,"table-container"],[1,"client-table"],["class","client-row",4,"ngFor","ngForOf"],["class","no-clients",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"client-row"],[1,"status"],[1,"actions"],[1,"btn-secondary",3,"click"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-danger",3,"click",4,"ngIf"],[1,"btn-danger",3,"click"],[1,"no-clients"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),r(3,"Gesti\xF3n de Clientes"),n(),u(4,T,2,0,"button",2),n(),i(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th"),r(10,"Nombre"),n(),i(11,"th"),r(12,"Ciudad"),n(),i(13,"th"),r(14,"Email"),n(),i(15,"th"),r(16,"Fecha Servicio"),n(),i(17,"th"),r(18,"Estado"),n(),i(19,"th"),r(20,"Acciones"),n()()(),i(21,"tbody"),u(22,U,18,12,"tr",5),n()()(),u(23,D,3,0,"div",6),n()),t&2&&(c(4),d("ngIf",o.canCreateClient()),c(18),d("ngForOf",o.filteredClients()),c(),d("ngIf",o.filteredClients().length===0))},dependencies:[S,P,O,k],styles:[".client-list[_ngcontent-%COMP%]{padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h2[_ngcontent-%COMP%]{color:#fff;margin:0}.btn-primary[_ngcontent-%COMP%]{background:#00d4ff;color:#0f0f23;border:none;padding:.75rem 1.5rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#00a8cc;transform:translateY(-2px)}.table-container[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.client-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.client-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#00d4ff1a;color:#00d4ff;padding:1rem;text-align:left;font-weight:600}.client-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid rgba(255,255,255,.05);color:#fff}.client-row[_ngcontent-%COMP%]:hover{background:#ffffff05}.status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:500}.status-pending[_ngcontent-%COMP%]{background:orange;color:#000}.status-in_progress[_ngcontent-%COMP%]{background:#00d4ff;color:#000}.status-completed[_ngcontent-%COMP%]{background:#28a745;color:#fff}.status-cancelled[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-secondary[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#fff3}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.no-clients[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#b0b0b0}@media(max-width:768px){.client-list[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}}"]})};export{L as ClientListComponent};
