import{a as D}from"./chunk-HJJX7XXA.js";import{a as O}from"./chunk-CTWZ4Y67.js";import{b as I,d as P}from"./chunk-VC6E4ROJ.js";import{g as S,h as M,j as h}from"./chunk-4LKPXAJC.js";import{a as k}from"./chunk-TEFFRFYT.js";import{Ca as b,Ha as m,N as s,S as g,Sa as c,T as u,Ta as n,Ua as e,Za as x,bb as _,db as d,ib as y,jb as i,kb as r,mb as E,qa as a,qb as v,sb as C}from"./chunk-7AMOEM73.js";function T(o,l){if(o&1){let t=x();n(0,"button",17),_("click",function(){g(t);let f=d(2);return u(f.editClient())}),i(1,"Editar"),e()}}function V(o,l){if(o&1&&(n(0,"div",10)(1,"label"),i(2,"Horario Real:"),e(),n(3,"span"),i(4),e()()),o&2){let t=d(2);a(4),r(t.client.actualTime)}}function A(o,l){if(o&1&&(n(0,"span"),i(1),e()),o&2){let t=d(2);a(),E("",t.assignedEmployee.firstName," ",t.assignedEmployee.lastName)}}function B(o,l){o&1&&(n(0,"span"),i(1,"No asignado"),e())}function F(o,l){if(o&1&&(n(0,"div",18)(1,"h3"),i(2,"Observaciones"),e(),n(3,"p"),i(4),e()()),o&2){let t=d(2);a(4),r(t.client.observations)}}function H(o,l){if(o&1){let t=x();n(0,"div",2)(1,"div",3)(2,"h2"),i(3),e(),n(4,"div",4)(5,"button",5),_("click",function(){g(t);let f=d();return u(f.goBack())}),i(6,"Volver"),e(),m(7,T,2,0,"button",6),e()(),n(8,"div",7)(9,"div",8)(10,"h3"),i(11,"Informaci\xF3n General"),e(),n(12,"div",9)(13,"div",10)(14,"label"),i(15,"Ciudad:"),e(),n(16,"span"),i(17),e()(),n(18,"div",10)(19,"label"),i(20,"Direcci\xF3n:"),e(),n(21,"span"),i(22),e()(),n(23,"div",10)(24,"label"),i(25,"Tel\xE9fono:"),e(),n(26,"span"),i(27),e()(),n(28,"div",10)(29,"label"),i(30,"Email:"),e(),n(31,"span"),i(32),e()()()(),n(33,"div",11)(34,"h3"),i(35,"Detalles del Servicio"),e(),n(36,"div",9)(37,"div",10)(38,"label"),i(39,"Fecha del Servicio:"),e(),n(40,"span"),i(41),v(42,"date"),e()(),n(43,"div",10)(44,"label"),i(45,"Horario Programado:"),e(),n(46,"span"),i(47),e()(),m(48,V,5,1,"div",12),n(49,"div",10)(50,"label"),i(51,"Estado:"),e(),n(52,"span",13),i(53),e()()()(),n(54,"div",14)(55,"h3"),i(56,"Asignaci\xF3n"),e(),n(57,"div",9)(58,"div",10)(59,"label"),i(60,"Empleado Asignado:"),e(),m(61,A,2,2,"span",15)(62,B,2,0,"span",15),e(),n(63,"div",10)(64,"label"),i(65,"Creado por:"),e(),n(66,"span"),i(67),e()(),n(68,"div",10)(69,"label"),i(70,"Fecha de Creaci\xF3n:"),e(),n(71,"span"),i(72),v(73,"date"),e()(),n(74,"div",10)(75,"label"),i(76,"\xDAltima Actualizaci\xF3n:"),e(),n(77,"span"),i(78),v(79,"date"),e()()()(),m(80,F,5,1,"div",16),e()()}if(o&2){let t=d();a(3),r(t.client.name),a(4),c("ngIf",t.canEdit()),a(10),r(t.client.city),a(5),r(t.client.address),a(5),r(t.client.phone),a(5),r(t.client.email),a(9),r(C(42,18,t.client.serviceDate,"dd/MM/yyyy")),a(6),r(t.client.scheduledTime),a(),c("ngIf",t.client.actualTime),a(4),y("status-"+t.client.status),a(),r(t.getStatusText(t.client.status)),a(8),c("ngIf",t.assignedEmployee),a(),c("ngIf",!t.assignedEmployee),a(5),r(t.client.createdBy==="1"?"Administrador":"Empleado"),a(5),r(C(73,21,t.client.createdAt,"dd/MM/yyyy HH:mm")),a(6),r(C(79,24,t.client.updatedAt,"dd/MM/yyyy HH:mm")),a(2),c("ngIf",t.client.observations)}}function N(o,l){if(o&1){let t=x();n(0,"div",19)(1,"h2"),i(2,"Cliente no encontrado"),e(),n(3,"button",17),_("click",function(){g(t);let f=d();return u(f.goBack())}),i(4,"Volver a la lista"),e()()}}var w=class o{route=s(I);router=s(P);clientService=s(D);authService=s(O);employeeService=s(k);client;assignedEmployee;ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l&&(this.client=this.clientService.getClientById(l)||void 0,this.client&&(this.assignedEmployee=this.employeeService.getEmployeeById(this.client.assignedEmployeeId)))}canEdit(){let l=this.authService.currentUser();return l?.role==="admin"||l?.role==="employee"&&this.client?.assignedEmployeeId===l.employeeId}editClient(){this.client&&this.router.navigate(["/clientes",this.client.id,"editar"])}goBack(){this.router.navigate(["/clientes"])}getStatusText(l){return{pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",cancelled:"Cancelado"}[l]||l}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-client-detail"]],decls:2,vars:2,consts:[["class","client-detail",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"client-detail"],[1,"detail-header"],[1,"actions"],[1,"btn-secondary",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],[1,"detail-content"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"service-section"],["class","info-item",4,"ngIf"],[1,"status"],[1,"assignment-section"],[4,"ngIf"],["class","observations-section",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"observations-section"],[1,"not-found"]],template:function(t,p){t&1&&m(0,H,81,27,"div",0)(1,N,5,0,"div",1),t&2&&(c("ngIf",p.client),a(),c("ngIf",!p.client))},dependencies:[h,S,M],styles:[".client-detail[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:1rem}h2[_ngcontent-%COMP%]{color:#fff;margin:0}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.info-section[_ngcontent-%COMP%], .service-section[_ngcontent-%COMP%], .assignment-section[_ngcontent-%COMP%], .observations-section[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:8px;padding:1.5rem;border:1px solid rgba(255,255,255,.1)}h3[_ngcontent-%COMP%]{color:#00d4ff;margin:0 0 1rem;font-size:1.2rem;font-weight:600}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}label[_ngcontent-%COMP%]{color:#b0b0b0;font-size:.9rem;font-weight:500}span[_ngcontent-%COMP%]{color:#fff;font-size:1rem}.status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:500;display:inline-block}.status-pending[_ngcontent-%COMP%]{background:orange;color:#000}.status-in_progress[_ngcontent-%COMP%]{background:#00d4ff;color:#000}.status-completed[_ngcontent-%COMP%]{background:#28a745;color:#fff}.status-cancelled[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.observations-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;line-height:1.6;margin:0}.not-found[_ngcontent-%COMP%]{text-align:center;padding:3rem}.not-found[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:2rem}.btn-primary[_ngcontent-%COMP%]{background:#00d4ff;color:#0f0f23;border:none;padding:.75rem 1.5rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#00a8cc;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#fff3}@media(max-width:768px){.client-detail[_ngcontent-%COMP%]{padding:1rem}.detail-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.actions[_ngcontent-%COMP%]{justify-content:center}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{w as ClientDetailComponent};
